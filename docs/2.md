# الاستخدام والنشر


## التثبيت

السكربت مكتوب ببايثون وإطار العمل فلاسك، لذلك ستحتاج تثبيت المحلقات التالية قبل استخدامه:

    pip3 install markdown flask

الآن قم [بتحميل ملفّات السكربت من رابطه على GitHub](https://github.com/mhsabbagh/mujallad)، وتأكّد من أنه يعمل جيدًا على نسختك المحلية:

    python3 main.py
    
ثم ستجد السكربت يعمل على [http://localhost:5000](http://localhost:5000). يمكنك تغيير اسم الموقع ووصفه عبر تعديل ملف config.py.

الآن إذا كنتَ تريد نشره (Deployment) على خادوم الويب الخاص بك، فإليك إعدادات خادوم nginx:

    server {

        root /var/www/mujallad.mhsabbagh.com;
        server_name mujallad.mhsabbagh.com;

        location / {
            include         uwsgi_params;
            uwsgi_pass   0.0.0.0:8080;
        }

        location ^~ static/  {
            include  /etc/nginx/mime.types;
            root /var/www/mujallad.mhsabbagh.com/;
        }
    }

ثم ستحتاج تشغيله كتطبيق uwsgi في الخلفية:

    nohup uwsgi --socket :8080 --chdir /var/www/mujallad.mhsabbagh.com --plugin python --wsgi-file main.py --callable app &

الآن اذهب إلى اسم نطاقك (الذي من المفترض أنك تستبدل **mujallad.mhsabbagh.com** به) وستجده يعمل هناك.

## الاستخدام

كل ما عليك فعله كمستخدم هو إنشاء الملفّات ضمن مجلّد **docs**. السكربت يعتمد على أسماء هذه الملفّات أن تكون مرتبة تصاعديًا ومرقّمة، مثلًا **1.md** سيكون الملفّ الأول ضمن جدول المحتويات، والملفّ **2.md** سيكون الثاني... وهكذا دواليك.

السكربت يستخرج عنوان كل مستند من الملف تلقائيًا، أول وسم h1 (أول وسم # في المستند يتم استعماله).

السكربت يستخدم دومًا أول مستند **1.md** كالصفحة الرئيسية (أو أي اسم ملف آخر يكون ترتيبه الأول في القائمة).
